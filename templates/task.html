{% extends "base.html" %}
{% block content %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/theme/material.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/mode/python/python.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css">

<script src="{{ url_for('static', filename='tasks.js') }}"></script>

<style>
    main {
        font-family: Arial, sans-serif;
        padding: 20px;
        padding-top: 84px;
    }
    .markdown-body {
        padding: 20px;
        border-radius: 5px;
    }
    pre {
        background-color: #333;
        padding: 10px;
        border-radius: 5px;
        overflow: auto;
    }
    code {
        background-color: #444;
        padding: 2px 4px;
        border-radius: 3px;
    }
    .taskn{
        margin-left: 20px;
    }
    textarea[id="code-input"]{
        padding: 5px;
        border-radius: 10px;
    }
</style>

{% if is_dark_theme %}
    <style>
        .taskn{
            color: #668cb3;
        }
    </style>
{% else %}
    <style>
        .taskn{
            color: #3e5974;
        }
    </style>
{% endif %}

<h2 class="taskn">Задача# {{ taskn }}</h2>
<div class="markdown-body" id="description">{{ description }}</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/marked/2.1.3/marked.min.js"></script>
<script>
    const markdownText = document.getElementById('description').textContent;
    const htmlContent = marked(markdownText);
    document.getElementById('description').innerHTML = htmlContent;
</script>

<!-- Форма для отправки кода -->
<form id="code-form" method="POST">
    <textarea id="code-input" name="code" rows="20" cols="80" placeholder="Введите ваш код"></textarea><br>
    <input type="hidden" name="task_name" value="{{ task_name }}">
    <input type="submit" value="Отправить">
</form>
<!-- Список посылок -->
<h2>Посылки</h2>
<div id="submissions-list">
    <!-- Список посылок будет загружен сюда через JavaScript -->
</div>
{% endblock %}